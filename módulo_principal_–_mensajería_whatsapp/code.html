<div id="new-interface-masivos" style="position: relative; z-index: 999; background: #0f172a; padding: 30px; border-radius: 20px; color: white;">
    <h1 style="color: #60a5fa; font-size: 24px;">üöÄ SOPORTE IA - ENV√çOS MASIVOS</h1>
    <p style="color: #94a3b8; margin-bottom: 20px;">Configuraci√≥n para woowestudio45@gmail.com</p>

    <div style="margin-bottom: 15px;">
        <label>Lista de N√∫meros (549...):</label>
        <textarea id="phone_input_masivo" style="width: 100%; height: 150px; background: #1e293b; color: white; border: 1px solid #334155; border-radius: 10px; padding: 15px;" placeholder="Pega los n√∫meros separados por comas..."></textarea>
    </div>

    <div style="margin-bottom: 20px;">
        <label>Mensaje a enviar:</label>
        <textarea id="msg_input_masivo" style="width: 100%; height: 100px; background: #1e293b; color: white; border: 1px solid #334155; border-radius: 10px; padding: 15px;" placeholder="Escribe tu mensaje..."></textarea>
    </div>

    <button id="btn_ia_expert" style="width: 100%; background: #2563eb; color: white; border: none; padding: 15px; border-radius: 10px; font-weight: bold; cursor: pointer;">
        CONSULTAR SOPORTE IA (HORARIOS Y FRECUENCIA)
    </button>

    <div id="ai_response_box" style="display: none; margin-top: 20px; padding: 15px; background: rgba(37, 99, 235, 0.2); border: 1px solid #2563eb; border-radius: 10px;">
        <h4 style="color: #60a5fa;">Estrategia Sugerida por Gemini 1.5:</h4>
        <p id="ai_text_report" style="font-size: 14px; color: #cbd5e1; white-space: pre-wrap;"></p>
    </div>
</div>

<script type="module">
    import { geminiService } from '../../services/geminiService.ts';
    
    document.getElementById('btn_ia_expert').onclick = async () => {
        const nums = document.getElementById('phone_input_masivo').value;
        const msg = document.getElementById('msg_input_masivo').value;
        const box = document.getElementById('ai_response_box');
        const text = document.getElementById('ai_text_report');

        if(!nums || !msg) return alert("Carga datos primero");

        document.getElementById('btn_ia_expert').innerText = "IA ANALIZANDO...";
        try {
            const res = await geminiService.analizarEstrategiaEnvio(nums, msg);
            text.innerText = res;
            box.style.display = 'block';
        } catch (e) {
            alert("Error: Revisa la API KEY en Vercel");
        } finally {
            document.getElementById('btn_ia_expert').innerText = "CONSULTAR SOPORTE IA (HORARIOS Y FRECUENCIA)";
        }
    };
</script>
