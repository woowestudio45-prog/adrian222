<div class="ia-messaging-container" style="padding: 24px; background: #0f172a; border-radius: 16px; border: 1px solid #1e293b; color: white; font-family: sans-serif;">
    <h2 style="font-size: 20px; font-weight: bold; margin-bottom: 20px; color: #60a5fa;">üöÄ Soporte IA - Env√≠os Masivos JEEMIA</h2>
    
    <div style="margin-bottom: 20px;">
        <label style="display: block; font-size: 14px; color: #94a3b8; margin-bottom: 8px;">Lista de N√∫meros (Separados por coma, ej: 549112233, 549114455)</label>
        <textarea id="phone_input" style="width: 100%; height: 120px; background: #1e293b; border: 1px solid #334155; border-radius: 8px; color: white; padding: 12px; font-family: monospace;" placeholder="Pega aqu√≠ los n√∫meros..."></textarea>
    </div>

    <div style="margin-bottom: 24px;">
        <label style="display: block; font-size: 14px; color: #94a3b8; margin-bottom: 8px;">Mensaje de Campa√±a</label>
        <textarea id="msg_input" style="width: 100%; height: 80px; background: #1e293b; border: 1px solid #334155; border-radius: 8px; color: white; padding: 12px;" placeholder="Escribe el mensaje a enviar..."></textarea>
    </div>

    <div style="display: flex; gap: 12px; margin-bottom: 20px;">
        <button id="btn_ia_support" style="flex: 1; background: #2563eb; color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer;">Consultar Soporte IA (Frecuencia y Horarios)</button>
        <button id="btn_start" style="flex: 1; background: #059669; color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer;">Iniciar Env√≠o Masivo</button>
    </div>

    <div id="report_box" style="display: none; padding: 16px; background: rgba(37, 99, 235, 0.1); border: 1px solid #2563eb; border-radius: 8px;">
        <h4 style="margin: 0 0 10px 0; color: #60a5fa;">Estrategia Sugerida:</h4>
        <p id="report_text" style="font-size: 14px; line-height: 1.5; color: #cbd5e1; white-space: pre-wrap;"></p>
        <div style="margin-top: 10px; font-size: 11px; color: #94a3b8; border-top: 1px solid #334155; padding-top: 8px;">Notificaci√≥n enviada a: woowestudio45@gmail.com</div>
    </div>
</div>

<script type="module">
    import { geminiService } from '../../services/geminiService.ts';

    const btn = document.getElementById('btn_ia_support');
    const reportBox = document.getElementById('report_box');
    const reportText = document.getElementById('report_text');

    btn.onclick = async () => {
        const nums = document.getElementById('phone_input').value;
        const msg = document.getElementById('msg_input').value;

        if(!nums || !msg) return alert("Completa los campos.");

        btn.innerText = "IA Analizando...";
        try {
            const res = await geminiService.analizarEstrategiaEnvio(nums, msg);
            reportText.innerText = res;
            reportBox.style.display = 'block';
        } catch (e) {
            alert("Error de conexi√≥n con Gemini.");
        } finally {
            btn.innerText = "Consultar Soporte IA (Frecuencia y Horarios)";
        }
    };
</script>
